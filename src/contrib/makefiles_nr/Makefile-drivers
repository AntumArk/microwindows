# Micro-Windows libmwdrivers.a library makefile for DJGPP
# by Georg Potthast June 2011
# based on makefile by Greg Haerr and V. Rogachev
#
LIB = libmwdrivers.a

# List of objects to compile 
# screen driver
ifdef DOS_DJGPP
          OBJECTS := scr_djvesa.o 
endif          
ifdef ALLEGRO4
          OBJECTS := scr_allegro.o 
endif
ifdef ALLEGRO5          
          OBJECTS := scr_allegro5.o           
endif
          OBJECTS += genfont.o        
          OBJECTS += fblin8.o 
          OBJECTS +=fblin16.o 
          OBJECTS +=fblin24.o 
          OBJECTS +=fblin32.o 
          OBJECTS +=genmem.o 
          OBJECTS +=fb.o 
          OBJECTS +=fbportrait_left.o fbportrait_right.o fbportrait_down.o 
          OBJECTS +=fblin1.o  
          OBJECTS +=fblin2.o  
          OBJECTS +=fblin4.o  
          OBJECTS +=rasterops.o 
          
# for EMSCRIPTEN
ifeq ($(SDL1), Y)
    OBJECTS += scr_sdl1.o 
    OBJECTS += mou_sdl1.o
    OBJECTS += kbd_sdl1.o
endif

ifeq ($(SDL2), Y)
    OBJECTS += scr_sdl2.o 
#    OBJECTS += scr_null.o 
    OBJECTS += mou_sdl2.o 
    OBJECTS += kbd_sdl2.o
endif

#for testing
ifeq ($(NOMOUSE), Y)
    OBJECTS += mou_null.o
endif

ifeq ($(NOKBD), Y)
    OBJECTS += kbd_null.o
endif

ifeq ($(NOSCR), Y)
    OBJECTS += scr_null.o
endif


# mouse driver
ifdef DOS_DJGPP
    OBJECTS += mou_dos.o
endif
ifdef ALLEGRO4
    OBJECTS += mou_allegro.o
endif
ifdef ALLEGRO5
    OBJECTS += mou_allegro5.o
    #OBJECTS += mou_null.o
endif

# keyboard driver
ifdef DOS_DJGPP
    OBJECTS += kbd_dj.o
endif
ifdef ALLEGRO4
    OBJECTS += kbd_allegro.o
endif
ifdef ALLEGRO5
    OBJECTS += kbd_allegro5.o
    #OBJECTS += kbd_null.o
endif

all: $(LIB)

clean:
	rm -f *.o *.a core

$(LIB): $(OBJECTS)
#	$(AR) rcs $(MW_DIR_SRC)/lib/$(LIB) $(OBJECTS)
	
